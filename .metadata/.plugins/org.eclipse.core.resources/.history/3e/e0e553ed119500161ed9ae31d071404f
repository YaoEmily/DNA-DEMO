package com.jiuqi.dna.demo.service.internal;

import java.util.List;

import com.jiuqi.dna.core.Context;
import com.jiuqi.dna.core.service.Publish;
import com.jiuqi.dna.core.service.Service;
import com.jiuqi.dna.demo.service.DeptManagementKeys;
import com.jiuqi.dna.demo.service.IDeptManagement;
import com.jiuqi.dna.demo.service.task.CreateDeptSimpleTask;
import com.jiuqi.dna.demo.service.task.EditDeptTask;
import com.jiuqi.dna.demo.service.task.EditDeptTask.METHOD;

public class DeptManagementService extends Service{

	protected DeptManagementService() {
		super("DeptManagementService");
		System.out.printf("DeptManagementService start...");
	}
	
	/*实现增删改至少需要三个简单任务，各司其职*/
	
	//简单任务处理器
	@Publish
	protected class CreateDeptSimpleTaskHandler extends SimpleTaskMethodHandler<CreateDeptSimpleTask>{

		@Override
		protected void handle(Context context, CreateDeptSimpleTask simpleTask)
				throws Throwable {
			// TODO Auto-generated method stub
			System.out.println("CreateDeptSimpleTaskHandler: " + simpleTask.name);
			
			simpleTask.isSeccess = true;
			simpleTask.message = "保存成功";
		}
		
	}
	
	@Publish
	protected class EditDeptTaskCreateHandler extends TaskMethodHandler<EditDeptTask, EditDeptTask.METHOD>
	{
		//识别任务方法类型
		protected EditDeptTaskCreateHandler() {
			super(EditDeptTask.METHOD.CREATE);
			// TODO Auto-generated constructor stub
		}

		@Override
		protected void handle(Context arg0, EditDeptTask task) throws Throwable {
			System.out.println("CreateDeptSimpleTaskHandler: " + task.deptName);
			
			task.isSeccess = true;
			task.message = "保存成功";
		}
	}
	
	@Publish
	protected class EditDeptTaskModifyHandler extends TaskMethodHandler<EditDeptTask, EditDeptTask.METHOD>
	{
		//识别任务方法类型
		protected EditDeptTaskModifyHandler() {
			super(EditDeptTask.METHOD.MODIFY);
			// TODO Auto-generated constructor stub
		}

		@Override
		protected void handle(Context arg0, EditDeptTask task) throws Throwable {
			System.out.println("CreateDeptSimpleTaskHandler: " + task.deptName);
			
			task.isSeccess = true;
			task.message = "保存成功";
		}
	}
	
	@Publish
	protected class EditDeptTaskHandler extends TaskMethodHandler<EditDeptTask, EditDeptTask.METHOD>
	{
		//识别任务方法类型
		protected EditDeptTaskHandler() {
			super(EditDeptTask.METHOD.CREATE);
			// TODO Auto-generated constructor stub
		}

		@Override
		protected void handle(Context arg0, EditDeptTask task) throws Throwable {
			System.out.println("CreateDeptSimpleTaskHandler: " + task.deptName);
			
			task.isSeccess = true;
			task.message = "保存成功";
		}
	}
	
	//结果提供器
	@Publish
	protected class DeptInfoProvider extends ResultProvider<IDeptManagement>{

		@Override
		protected IDeptManagement provide(Context arg0) throws Throwable {
			DeptManagementInfo deptManagementInfo = new DeptManagementInfo();
			deptManagementInfo.deptName = "久其软件";
			
			return deptManagementInfo;
		}
	}
	
	protected class DeptInfoByRecidProvider extends OneKeyResultListProvider<IDeptManagement, DeptManagementKeys>
	{

		@Override
		protected void provide(Context arg0, DeptManagementKeys arg1, List<IDeptManagement> arg2) throws Throwable {
			// TODO Auto-generated method stub
			
		}
		
	}
	
	//结果列表提供器
	protected class DeptInfoListProvider extends ResultListProvider<IDeptManagement>
	{

		@Override
		protected void provide(Context arg0, List<IDeptManagement> arg1) throws Throwable {
			// TODO Auto-generated method stub
			
		}
		
	}
}
